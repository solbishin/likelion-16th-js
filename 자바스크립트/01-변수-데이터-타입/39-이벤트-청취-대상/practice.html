<!DOCTYPE html>
<html lang="ko-KR">

<head>
  <meta charset="UTF-8" />
  <title>이벤트 마스터: 요소 참조 방식</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="./assets/styles.css" />
  <style>
    .view-toggle {
      margin: 60px;

      button {
        cursor: pointer;
        margin-inline-end: 6px;
        padding: 8px 16px;
        border: 1px solid #ccc;
        background: #fff;

        &.active {
          border-color: #1e88e5;
          background-color: #42a5f5;
          color: white;
        }
      }
    }
  </style>
</head>

<body>

  <div role="group" class="view-toggle">
    <button type="button" data-view="list" aria-pressed="false">
      리스트 보기
    </button>
    <button type="button" data-view="grid" aria-pressed="true" class="active">
      그리드 보기
    </button>
    <button type="button" data-view="table" aria-pressed="false">
      테이블 보기
    </button>
  </div>

  <script>
    // 보기 전환 버튼 그룹
    const viewToggleGroup = document.querySelector('.view-toggle')
    const toggleButtons = viewToggleGroup.querySelectorAll('[type="button"]')

    // 수집된 버튼 집합을 순환해서 각각의 버튼에 이벤트 리스너 추가
    toggleButtons.forEach((button) => {
      button.addEventListener('click', (e) => {
        // `e.currentTarget`을 사용해 다음 요구사항을 구현합니다.
        const selectedButton = e.currentTarget
        // console.log('사용자가 선택한 버튼\n', selectedButton)

        // 이전에 활성화 상태였던 버튼
        const beforeActivedButton = viewToggleGroup.querySelector('.active')

        // 1-1. 현재 활성 상태였던 버튼을 비활성 상태로 전환
        beforeActivedButton.classList.remove('active')
        // 1-2. 버튼 중 하나를 클릭하면 활성 상태로 전환하고, 다른 버튼은 비활성 상태로 전환됩니다.
        selectedButton.classList.add('active')

        // 2. 사용자에 의해 선택된 뷰(view)가 무엇인 지, 콘솔 패널에 출력합니다.
        // 2-1. getAttribute로 data-로 시작하는 속성 값 가져오기
        console.log(selectedButton.getAttribute('data-view'))
        // 2-1. 요소의 dataset 속성을 사용해 data-로 시작하는 속성 값 가져오기
        console.log(selectedButton.dataset.view)

        // 3. `aria-pressed` 속성을 사용해 눌려진 버튼 상태를 명시합니다.
        // 이전 활성 상태였던 버튼(beforeActivedButton)은 aria-pressed="false"로 전환
        beforeActivedButton.setAttribute('aria-pressed', 'false')
        // 현재 활성 상태인 버튼(selectedButton)은 aria-pressed="true"로 전환
        selectedButton.setAttribute('aria-pressed', 'true')
      })
    })
  </script>
</body>

</html>