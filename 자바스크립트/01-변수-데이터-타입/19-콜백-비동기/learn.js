// --------------------------------------------------------------------------
// ì‹¤ìŠµ: ì½œë°±ê³¼ ë¹„ë™ê¸° (Callback & Asynchronous)
// --------------------------------------------------------------------------
// * ì£¼ë¬¸(Call): í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ë©° ì‘ì—…ì„ ìš”ì²­í•¨
// * ì§„ë™ë²¨(Callback): ë‚˜ì¤‘ì— ì‘ì—…ì´ ëë‚˜ë©´ ì‹¤í–‰ë  í•¨ìˆ˜ë¥¼ ì¸ìë¡œ ì „ë‹¬í•¨
// * ë¹„ë™ê¸°(Async): ì»¤í”¼ê°€ ë‚˜ì˜¬ ë•Œê¹Œì§€ ë©ˆì¶”ì§€ ì•Šê³  ë‹¤ë¥¸ ì¼ì„ ì²˜ë¦¬í•¨
// --------------------------------------------------------------------------

const body = document.body,
  orderButton = document.querySelector('.order-button'),
  statusText = document.querySelector('.status'),
  logList = document.querySelector('.log-list')

// --------------------------------------------------------------------------
// 1. ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆì™€ ì½œë°±
// --------------------------------------------------------------------------

// í´ë¦­ ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆì„ ë•Œ ì‹¤í–‰ë  "ì½œë°± í•¨ìˆ˜"ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤.
// ì½œë°± í•¨ìˆ˜ : coffeeReadyCallback
orderButton.addEventListener('click', () => {
  console.log('[1] ì ì›ì—ê²Œ "ë”°ëœ»í•œ ë¼ë–¼"ë¥¼ ì£¼ë¬¸í–ˆìŠµë‹ˆë‹¤.')
  console.log('[2] ìƒíƒœ : ì»¤í”¼ ì œì¡° ì¤‘... (ë¹„ë™ê¸° ì‘ì—… ì‹œì‘)')

  // 3ì´ˆ(3s === 3000ms) ë’¤ì— ì»¤í”¼ê°€ ì™„ì„±ëœë‹¤ê³  ê°€ì •
  // setTimeoutì€ ëŒ€í‘œì ì¸ ë¹„ë™ê¸° í•¨ìˆ˜ì…ë‹ˆë‹¤.
  window.setTimeout(() => {
    console.log('[3] ë©”ë‰´ê°€ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤. (ë¹„ë™ê¸° ì‘ì—… ì™„ë£Œ)')
  }, 3000)

  console.log('[4] ì§„ë™ë²¨ì„ ë°›ê³  ìë¦¬ë¡œ ëŒì•„ì™€ ìŠ¤ë§ˆíŠ¸í°ì„ ë´…ë‹ˆë‹¤. (ì°¨ë‹¨ ë°©ì§€)')
})

// JavaScriptëŠ” ì‹±ê¸€ ìŠ¤ë ˆë“œ(í•œ ë²ˆì— í•˜ë‚˜ì˜ ì¼ë§Œ ìˆ˜í–‰ ê°€ëŠ¥)
// ë™ê¸°(sync) ì²˜ë¦¬
// 1 -> 2 -> 3 -> 4

// ë¹„ë™ê¸°(async) ì²˜ë¦¬
// 1 -> 2 -> 4 -> 3

// --------------------------------------------------------------------------
// 2. ë™ê¸°(Sync) vs ë¹„ë™ê¸°(Async) ì´í•´í•˜ê¸°
// --------------------------------------------------------------------------

// [ì‹¤ìŠµ] ì•„ë˜ ì£¼ì„ì„ í•´ì œí•˜ë©´ 'ì½”ë“œ ë¸”ë¡œí‚¹'ì´ ë¬´ì—‡ì¸ì§€ ê²½í—˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
// ì£¼ì˜:  âš ï¸ ë¸Œë¼ìš°ì €ê°€ ë©ˆì¶œ ìˆ˜ ìˆìœ¼ë‹ˆ í™•ì¸ í›„ ë°”ë¡œ ë‹¤ì‹œ ì£¼ì„ ì²˜ë¦¬í•˜ì„¸ìš”!

// codeBlockingDemo()


// --------------------------------------------------------------------------
// 3. ì»¤ìŠ¤í…€ ì½œë°± í•¨ìˆ˜ ë§Œë“¤ê¸°
// --------------------------------------------------------------------------

/**
 * ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³  ì™„ë£Œë˜ë©´ ì½œë°±ì„ ì‹¤í–‰í•˜ëŠ” í•¨ìˆ˜
 * @param {Function} callback - ì‘ì—… ì™„ë£Œ í›„ ì‹¤í–‰í•  í•¨ìˆ˜
 */
function completeTask(callback) {
  console.log('ì‘ì—… ì‹œì‘(ë¹„ë™ê¸° ì²˜ë¦¬ ì‹œì‘)') // [1] 
  setTimeout(callback, 2000)
  console.log('ì‘ì—… ì™„ë£Œ(ë¹„ë™ê¸° ì²˜ë¦¬ ì™„ë£Œ)') // [3]
}

// [ì—°ìŠµ] completeTaskë¥¼ í˜¸ì¶œí•˜ë©´ì„œ ìµëª… ì½œë°± í•¨ìˆ˜ë¥¼ ì „ë‹¬í•´ ë³´ì„¸ìš”.
completeTask(() => {
  console.log('ë¹„ë™ê¸° ì²˜ë¦¬ëœ ì‘ì—…ì´ ëª¨ë‘ ë§ˆë¬´ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤') // [2]
})

// click ì»¤ìŠ¤í…€ í•¨ìˆ˜
// ì´ í•¨ìˆ˜ì˜ ìš”ì†Œ(ê°ì²´)ì— í´ë¦­ ì´ë²¤íŠ¸ ì„¤ì •
// ì½œë°± í•¨ìˆ˜ ì „ë‹¬
// íŠ¹ì • ì‹œê°„ ë’¤ì— ì‘ë™

function delayClick(element, callback, timeout) {
  element.addEventListener('click', () => {
    setTimeout(callback, timeout)
  })
}

delayClick(orderButton, () => { alert('ë©”ë‰´ ì£¼ë¬¸ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤!') }, 1500)






// --------------------------------------------------------------------------
// í•µì‹¬ ìš”ì•½!
// --------------------------------------------------------------------------
// 1. ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” 'ì‹±ê¸€ ìŠ¤ë ˆë“œ'ë¼ í•œ ë²ˆì— í•œ ì¼ë§Œ í•˜ì§€ë§Œ, 'ë¹„ë™ê¸°'ë¡œ ì°¨ë‹¨ì„ ë§‰ìŠµë‹ˆë‹¤.
// 2. ì½œë°±ì€ "ë‚˜ì¤‘ì— ì¼ì´ ëë‚˜ë©´ ì•Œë ¤ì¤˜"ë¼ê³  ë§¡ê²¨ë†“ì€ í•¨ìˆ˜ì…ë‹ˆë‹¤.
// 3. ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ í†µí•´ ì‚¬ìš©ì ê²½í—˜(UX)ì´ ë©ˆì¶”ì§€ ì•ŠëŠ” ë§¤ë„ëŸ¬ìš´ ì›¹ì„ ë§Œë“­ë‹ˆë‹¤.




// --------------------------------------------------------------------------

function addLog(message) {
  const li = document.createElement('li')
  const time = new Date().toLocaleTimeString()
  li.textContent = '[' + time + '] ' + message
  logList.prepend(li)
}

function coffeeReadyCallback() {
  addLog('ğŸ”” ì§€ì´ì‰- ì»¤í”¼ê°€ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤! (ì½œë°± ì‹¤í–‰)')
  statusText.textContent = 'ìƒíƒœ : ì£¼ë¬¸í•˜ì‹  ìŒë£Œê°€ ë‚˜ì™”ìŠµë‹ˆë‹¤.'
  document.body.style.backgroundColor = 'var(--surface-color)'
}

function codeBlockingDemo() {
  addLog('ë¡œë´‡ì´ í”¼ìë¥¼ ê¸°ë‹¤ë¦¬ëŠë¼ ë©ˆì·„ìŠµë‹ˆë‹¤...')
  const start = Date.now()
  while (Date.now() - start < 5000) { }
  addLog('5ì´ˆê°€ ì§€ë‚˜ì„œì•¼ ë‹¤ìŒ ì¼ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.')
} 