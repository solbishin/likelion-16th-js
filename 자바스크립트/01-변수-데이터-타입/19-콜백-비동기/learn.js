// --------------------------------------------------------------------------
// 실습: 콜백과 비동기 (Callback & Asynchronous)
// --------------------------------------------------------------------------
// * 주문(Call): 함수를 실행하며 작업을 요청함
// * 진동벨(Callback): 나중에 작업이 끝나면 실행될 함수를 인자로 전달함
// * 비동기(Async): 커피가 나올 때까지 멈추지 않고 다른 일을 처리함
// --------------------------------------------------------------------------

const body        = document.body,
      orderButton = document.querySelector('.order-button'),
      statusText  = document.querySelector('.status'),
      logList     = document.querySelector('.log-list')

// --------------------------------------------------------------------------
// 1. 이벤트 리스너와 콜백
// --------------------------------------------------------------------------

// 클릭 이벤트가 발생했을 때 실행될 "콜백 함수"를 등록합니다.
// 콜백 함수 : coffeeReadyCallback
orderButton.addEventListener('click', () => {
  addLog('점원에게 "따뜻한 라떼"를 주문했습니다.')
  statusText.textContent = '상태 : 커피 제조 중... (비동기 작업 시작)'
  
  // 3초 뒤에 커피가 완성된다고 가정
  // setTimeout은 대표적인 비동기 함수입니다.

  addLog('진동벨을 받고 자리로 돌아와 스마트폰을 봅니다. (차단 방지)')
})


// --------------------------------------------------------------------------
// 2. 동기(Sync) vs 비동기(Async) 이해하기
// --------------------------------------------------------------------------

// [실습] 아래 주석을 해제하면 '코드 블로킹'이 무엇인지 경험할 수 있습니다.
// 주의:  ⚠️ 브라우저가 멈출 수 있으니 확인 후 바로 다시 주석 처리하세요!

// codeBlockingDemo()


// --------------------------------------------------------------------------
// 3. 커스텀 콜백 함수 만들기
// --------------------------------------------------------------------------

/**
 * 작업을 수행하고 완료되면 콜백을 실행하는 함수
 * @param {Function} callback - 작업 완료 후 실행할 함수
 */
function completeTask() {

}

// [연습] completeTask를 호출하면서 익명 콜백 함수를 전달해 보세요.


// --------------------------------------------------------------------------
// 핵심 요약!
// --------------------------------------------------------------------------
// 1. 자바스크립트는 '싱글 스레드'라 한 번에 한 일만 하지만, '비동기'로 차단을 막습니다.
// 2. 콜백은 "나중에 일이 끝나면 알려줘"라고 맡겨놓은 함수입니다.
// 3. 비동기 처리를 통해 사용자 경험(UX)이 멈추지 않는 매끄러운 웹을 만듭니다.




// --------------------------------------------------------------------------

function addLog(message) {
  const li = document.createElement('li')
  const time = new Date().toLocaleTimeString()
  li.textContent = '[' + time + '] ' + message
  logList.prepend(li)
}

function coffeeReadyCallback() {
  addLog('🔔 지이잉- 커피가 완성되었습니다! (콜백 실행)')
  statusText.textContent = '상태 : 주문하신 음료가 나왔습니다.'
  document.body.style.backgroundColor = 'var(--surface-color)'
}

function codeBlockingDemo() {
  addLog('로봇이 피자를 기다리느라 멈췄습니다...')
  const start = Date.now()
  while (Date.now() - start < 5000) {}
  addLog('5초가 지나서야 다음 일을 할 수 있습니다.')
}